<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
<body>
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0"><i class="fa-solid fa-shop"></i> <%= mode==='create'?'Create':'Edit' %> Salon</h3>
    <div><a class="btn btn-secondary" href="/salons"><i class="fa-solid fa-arrow-left"></i> Back</a></div>
  </div>

  <form method="post" action="<%= mode==='create'? '/salons/create' : '/salons/'+row.id+'/edit' %>" class="row g-3">

    <div class="col-md-6">
      <label class="form-label">Salon Name</label>
      <input name="name" class="form-control" required value="<%= row.name||'' %>">
    </div>

    <div class="col-12"><hr><strong>Salon Login (also the salon contact email)</strong></div>

    <div class="col-md-6">
      <label class="form-label">Email</label>
      <input name="email" type="email" class="form-control" required value="<%= (adminUser?.email || row.email || '') %>">
    </div>

    <div class="col-md-3">
      <label class="form-label">Password <%= mode==='edit' ? '(leave blank to keep)' : '' %></label>
      <input name="password" type="password" class="form-control"
             <%= mode==='create'?'required':'' %>
             pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*[^A-Za-z0-9]).{8,}$"
             title="At least 8 chars, 1 upper, 1 lower, 1 special">
    </div>

    <div class="col-md-3">
      <label class="form-label">Confirm Password <%= mode==='edit' ? '(leave blank to keep)' : '' %></label>
      <input name="confirm_password" type="password" class="form-control" <%= mode==='create'?'required':'' %>>
    </div>

    <div class="col-12"><hr><strong>Contact & Address</strong></div>

    <div class="col-md-4">
      <label class="form-label">Phone</label>
      <input name="phone" class="form-control" value="<%= row.phone||'' %>">
    </div>

    <div class="col-md-4">
      <label class="form-label">Active</label>
      <select name="is_active" class="form-select">
        <option value="1" <%= (row.is_active ?? 1) ? 'selected':'' %>>Yes</option>
        <option value="0" <%= (row.is_active === 0) ? 'selected':'' %>>No</option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">Address Line 1</label>
      <input name="address_line1" class="form-control" value="<%= row.address_line1||'' %>">
    </div>
    <div class="col-md-6">
      <label class="form-label">Address Line 2</label>
      <input name="address_line2" class="form-control" value="<%= row.address_line2||'' %>">
    </div>
    <div class="col-md-3">
      <label class="form-label">City</label>
      <input name="city" class="form-control" value="<%= row.city||'' %>">
    </div>
    <div class="col-md-3">
      <label class="form-label">Region</label>
      <input name="region" class="form-control" value="<%= row.region||'' %>">
    </div>
    <div class="col-md-3">
      <label class="form-label">Postal Code</label>
      <input name="postal_code" class="form-control" value="<%= row.postal_code||'' %>">
    </div>
    <div class="col-md-3">
      <label class="form-label">Country</label>
      <input name="country" maxlength="2" class="form-control" value="<%= row.country||'CA' %>">
    </div>

    <div class="col-12">
      <button class="btn btn-primary"><i class="fa-solid fa-floppy-disk"></i> Save</button>
    </div>
  </form>
</div>
<%- include('../partials/foot') %>